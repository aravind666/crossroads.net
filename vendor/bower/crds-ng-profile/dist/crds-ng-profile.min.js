(function(){angular.module("crdsProfile",["crdsSecurityContext"])}).call(this),function(){angular.module("crdsProfile").controller("crdsDatePickerCtrl",["$scope",function(e){return console.log("date picker controller"),e.today=function(){e.dt=new Date},e.clear=function(){e.dt=null},e.open=function(n){n.preventDefault(),n.stopPropagation(),e.opened=!0},e.dateOptions={formatYear:"yy",startingDay:1,showWeeks:!1},e.today()}])}.call(this),function(){angular.module("crdsProfile").controller("crdsProfilePersonal",["$scope","SecurityContext","Profile",function(e,n,l){var a;return console.log("profile personal controller1"),a={lookupValues:function(){return console.log("lookupValues"),l.getMaritalStatusValues().then(function(n){return e.maritalstatusVals=n}),l.getGenderValues().then(function(n){return e.genders=n})}},console.log("profile personal controller2"),a.lookupValues()}])}.call(this),function(){var e=function(e,n){return function(){return e.apply(n,arguments)}};angular.module("crdsProfile").directive("crdsProfile",["$timeout","$animate","$compile","$templateCache",function(n,l,a,t){return{restrict:"EA",scope:!0,controller:["$scope","$element","$attrs","Profile",function(n,s,i,o){return new(function(){function r(){this.registerLogin=e(this.registerLogin,this),console.log("Profile Controller"),this.addLoading(),this.profileTemplate=a(t.get("profile.html")),n.$watch("securityContext.loggedIn",function(e){return function(l){var a,t;if(t=n.securityContext.user,l&&t)return console.log("crdsProfile - Current user has changed to "+t.FirstName),o.getContact(t.ContactId).then(function(e){return n.contact=e}),e.removeLoading(),e.loginCtrl&&e.loginCtrl.hide(),e.profileElement=e.profileTemplate(n),s.append(e.profileElement);if(l===!1){if(console.log("crdsProfile - User has now logged out"),e.removeLoading(),a=s.parent(),e.profileElement&&e.profileElement.remove(),e.loginCtrl)return e.loginCtrl.show(a,s)}else if(null===l)return console.log("crdsProfile - User is in loading state"),e.loginCtrl&&e.loginCtrl.hide(),e.profileElement&&e.profileElement.remove(),e.addLoading()}}(this))}return r.prototype.registerLogin=function(e){return console.log("Registered login controller"),this.loginCtrl=e},r.prototype.removeLoading=function(){return i.loadingClass&&l.removeClass(s,i.loadingClass),s.html("")},r.prototype.addLoading=function(){return i.loadingClass?l.addClass(s,i.loadingClass):void 0},r}())}]}}])}.call(this),function(){var e=function(e,n){return function(){return e.apply(n,arguments)}};angular.module("crdsProfile").directive("crdsProfileLogin",["$animate",function(n){return{require:["^crdsProfile","crdsProfileLogin"],restrict:"EA",scope:!0,terminal:!0,priority:1e3,transclude:"element",link:function(e,n,l,a){var t,s;console.log("crdsProfileLogin link()"),t=a[0],s=a[1],t.registerLogin(s)},controller:["$scope","$element","$attrs","$transclude",function(l,a,t,s){return new(function(){function l(){this.hide=e(this.hide,this),this.show=e(this.show,this)}return l.prototype.show=function(e,l){return this.loginElement?void 0:s(function(a){return function(t){return a.loginElement=t,n.enter(t,e,l)}}(this))},l.prototype.hide=function(){return this.loginElement?(n.leave(this.loginElement),this.loginElement=null):void 0},l}())}]}}])}.call(this),function(){angular.module("crdsProfile").factory("Profile",["$http","$rootScope",function(e){var n;return n={getContact:function(l){return console.log("getContact"),e.get("/getContact/"+l).then(function(e){var l;return"object"==typeof e.data?l={emailaddress:n.extractFieldValue(e.data,"Email_Address"),firstname:n.extractFieldValue(e.data,"First_Name"),middlename:n.extractFieldValue(e.data,"Middle_Name"),lastname:n.extractFieldValue(e.data,"Last_Name"),maidenname:"",nickname:n.extractFieldValue(e.data,"Nickname"),mobile:n.extractFieldValue(e.data,"Mobile_Phone"),mobileprovider:"",birthdate:n.extractFieldValue(e.data,"Date_of_Birth"),maritalstatus:n.extractFieldValue(e.data,"Marital_Status_ID"),gender:n.extractFieldValue(e.data,"Gender_ID_Text"),employer:n.extractFieldValue(e.data,"Company_Name"),startattending:n.extractFieldValue(e.data,"Anniversary_Date")}:null},function(){return null})},getMaritalStatusValues:function(){return console.log("getMaritalStatusValues"),e.get("getMaritalStatus").then(function(e){var l;return"object"==typeof e.data?l=n.formatValues(e.data):null},function(){return null})},getGenderValues:function(){return console.log("getGenderValues"),e.get("getGenders").then(function(e){var l;return"object"==typeof e.data?l=n.formatValues(e.data):null},function(){return null})},formatValues:function(e){var n,l,a;for(a=[],l=0;l<e.length;)n={id:e[l][0],value:e[l][1]},a.push(n),l++;return a},extractFieldValue:function(e,l){var a,t,s,i;if(e.Fields&&e.Data&&e.Data[0])for(a=0;a<e.Fields.length;){if(e.Fields[a].Name===l&&10!==e.Fields[a].DataType)return t=e.Fields[a].Name,i=e.Data[0][e.Fields[a].Index],s={key:t,value:i};if(e.Fields[a].Name===l&&10===e.Fields[a].DataType)return t=e.Fields[a].Name,i=e.Data[0][e.Fields[a].Index],s={key:t,value:n.extractDateValue(i)};a++}return null},extractDateValue:function(e){var n,l,a,t,s,i;return e?(s=e.match(/\((.*?)-/),null!==s?(n=new Date(Number(s[1])),i=n.getFullYear(),a=n.getMonth()+1,l=n.getDate(),t=""+a+"/"+l+"/"+i):null):null}}}])}.call(this),angular.module("templates").run(["$templateCache",function(e){e.put("profile.html",'<div class="row">\n  <div class="col-sm-10 col-sm-offset-1">\n    <h1>My Profile</h1>\n    <h2 class="subheading">Hello, special you.  </h2>\n    <div class="profile-header">\n      <div class="row">\n        <div class="col-xs-3 col-sm-2">\n          <a href="#" class="profile-pic">\n            <img class="profile-image pull-left img-square img-responsive" src="//crossroads-media.s3.amazonaws.com/images/avatar.svg" alt="Profile Default Photo" />\n            <span class="change-photo">Change Photo</span>\n          </a>\n        </div>\n        <div class="profile-desc col-xs-7 col-sm-9">\n          <h3 class="profile-name">Test User</h3>\n          <p class="lead"><a href="#household" data-toggle="tab" class="edit-church-site">Church Site <span class="glyphicon glyphicon-pencil"></span></a></p>\n          <div class="col-sm-6 row">\n            <div class="progress">\n              <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">\n                60%\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="profile-body col-sm-12 row">\n\n      <tabset ng-init="set = {}">\n        <tab heading="Personal"><ng-include src=" \'profile_personal.html\' "></ng-include></tab>\n        <tab heading="Household" class="hidden-xs" active="set.showHousehold"><ng-include src=" \'profile_household.html\'" ></ng-include></tab>\n        <tab heading="Account"><ng-include src=" \'profile_account.html\' "></ng-include></tab>\n        <tab heading="Skills" class="hidden-xs" active="set.showSkills"><ng-include src=" \'profile_skills.html\' "></ng-include></tab>\n        <tab heading="History" class="hidden-xs" active="set.showHistory"><ng-include src=" \'profile_history.html\' "></ng-include></tab>\n        <li role="tab" data-toggle="tab" class="dropdown hidden-md hidden-lg hidden-sm dropdown-toggle" data-toggle="dropdown">\n          <a href="#">More <span class="caret"></span></a>\n          <ul class="dropdown-menu" role="menu">\n            <li><a href="#" ng-click="set.showHousehold = true">Household</a></li>\n            <li><a href="#" ng-click="set.showSkills = true">Skills</a></li>\n            <li><a href="#" ng-click="set.showHistory = true">History</a></li>\n          </ul>\n        </li>\n      </tabset>\n    </div>\n  </div>\n'),e.put("profile_account.html",'<form role="form">\n\n  <div class="row">\n    <div class="form-group col-sm-6">\n      <label for="password">Password</label>\n      <div class="input-group">\n        <input type="password" class="form-control" id="password" name="password" ng-model="fields.password" ng-if="!showPassword" value="testpassword" />\n        <input type="text" class="form-control" id="password-clear" name="password" ng-model="fields.password" ng-if="showPassword" value="testpassword"/>\n        <span class="input-group-addon">\n          <label>\n            <input type="checkbox" ng-click="showPassword = !showPassword"> Show\n          </label>\n        </span>\n      </div><!-- /input-group -->\n    </div>\n    <div class="form-group col-sm-12">\n      <label class="block">Email Communication</label>\n      <label class="radio-inline">\n        <input type="radio" name="subscription" value="on" checked="checked"> On\n      </label>\n      <label class="radio-inline">\n        <input type="radio" name="subscription" value="off"> Off\n      </label>\n    </div>\n\n  </div>\n  <button class="btn btn-primary ladda-button" data-style="expand-left"><span class="ladda-label">Save</span></button>\n</form>\n'),e.put("profile_history.html",'<div class="history-timeline row">\n  <ul class="timeline">\n    <li>\n      <div class="timeline-badge default">\n        <svg viewBox="0 0 32 32" class="icon icon-users">\n            <use xlink:href="#users"></use>\n        </svg>\n      </div>\n      <div class="timeline-panel">\n        <div class="timeline-heading">\n          <h5 class="timeline-title">Attended Listening Training</h5>\n          <div class="timeline-body"><p class="text-muted">7/10/2014</p></div>\n        </div>\n      </div>\n    </li>\n    <li>\n      <div class="timeline-badge info">\n        <svg viewBox="0 0 32 32" class="icon icon-users">\n            <use xlink:href="#users"></use>\n        </svg>\n      </div>\n      <div class="timeline-panel">\n        <div class="timeline-heading">\n          <h5 class="timeline-title">Joined the India Interest Group</h5>\n          <div class="timeline-body"><p class="text-muted">1/18/2014</p></div>\n        </div>\n      </div>\n    </li>\n    <li>\n      <div class="timeline-badge info">\n        <svg viewBox="0 0 32 32" class="icon icon-users">\n            <use xlink:href="#users"></use>\n        </svg>\n      </div>\n      <div class="timeline-panel">\n        <div class="timeline-heading">\n          <h5 class="timeline-title">Joined the Fathers Oakley Fall 2011 Group</h5>\n          <div class="timeline-body"><p class="text-muted">11/8/2013</p></div>\n        </div>\n      </div>\n    </li>\n    <li>\n      <div class="timeline-badge default">\n        <svg viewBox="0 0 32 32" class="icon icon-calendar">\n            <use xlink:href="#calendar"></use>\n        </svg>\n      </div>\n      <div class="timeline-panel">\n        <div class="timeline-heading">\n          <h5 class="timeline-title">Attended Go Cincinnati</h5>\n          <div class="timeline-body"><p class="text-muted">5/10/2013</p></div>\n        </div>\n      </div>\n    </li>\n    <li>\n      <div class="timeline-badge info">\n        <svg viewBox="0 0 32 32" class="icon icon-users">\n            <use xlink:href="#users"></use>\n        </svg>\n      </div>\n      <div class="timeline-panel">\n        <div class="timeline-heading">\n          <h5 class="timeline-title">Joined the Crossroads.net Development Group</h5>\n          <div class="timeline-body"><p class="text-muted">11/8/2012</p></div>\n        </div>\n      </div>\n    </li>\n    <li>\n      <div class="timeline-badge info">\n        <svg viewBox="0 0 32 32" class="icon icon-users">\n            <use xlink:href="#users"></use>\n        </svg>\n      </div>\n      <div class="timeline-panel">\n        <div class="timeline-heading">\n          <h5 class="timeline-title">Joined the Crossroads.net Contractors Group</h5>\n          <div class="timeline-body"><p class="text-muted">11/8/2012</p></div>\n        </div>\n      </div>\n    </li>\n    <li>\n      <div class="timeline-badge success">\n        <svg viewBox="0 0 32 32" class="icon icon-gift">\n            <use xlink:href="#gift"></use>\n        </svg>\n      </div>\n      <div class="timeline-panel">\n        <div class="timeline-heading">\n          <h5 class="timeline-title">My first financial gift</h5>\n          <div class="timeline-body"><p class="text-muted">11/23/2003</p></div>\n        </div>\n      </div>\n    </li>\n    <li>\n      <div class="timeline-badge primary">\n        <svg viewBox="0 0 32 32" class="icon icon-close">\n          <use xlink:href="#close"></use>\n        </svg>\n      </div>\n      <div class="timeline-panel">\n        <div class="timeline-heading">\n          <h5 class="timeline-title">Attended my first Crossroads service</h5>\n          <div class="timeline-body"><p class="text-muted">7/14/2003</p></div>\n        </div>\n      </div>\n    </li>\n  </ul>\n</div>\n'),e.put("profile_household.html",'<fieldset class="row">\n  <legend class="col-sm-12">Your Household</legend>\n  <div class="col-md-4 profile-card clearfix">\n    <div class="well well-sm">\n      <div class="media">\n        <div class="thumbnail pull-left">\n          <img class="media-object" src="//crossroads-media.s3.amazonaws.com/images/avatar.svg" alt="Profile Default Photo" />\n        </div>\n        <div class="media-body">\n          <h4 class="media-heading">Jane Doe</h4>\n          <p><span class="label label-info">Spouse</span></p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="col-md-4 profile-card clearfix">\n    <div class="well well-sm">\n      <div class="media">\n        <div class="thumbnail pull-left">\n          <img class="media-object" src="//crossroads-media.s3.amazonaws.com/images/avatar.svg" alt="Profile Default Photo" />\n        </div>\n        <div class="media-body">\n          <h4 class="media-heading">John Doe</h4>\n          <p><span class="label label-info">Son</span></p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="col-md-4 profile-card clearfix">\n    <div class="well well-sm">\n      <div class="media">\n        <div class="thumbnail pull-left">\n          <img class="media-object" src="//crossroads-media.s3.amazonaws.com/images/avatar.svg" alt="Profile Default Photo" />\n        </div>\n        <div class="media-body">\n          <h4 class="media-heading">Jill Doe</h4>\n          <p><span class="label label-info">Daughter</span></p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</fieldset>\n\n  <hr class="col-sm-12" />\n\n<fieldset class="row">\n\n  <div class="form-group col-sm-6">\n    <label for="street">Street</label>\n    <input type="text" class="form-control" id="street" placeholder="Enter street address">\n  </div>\n\n  <div class="form-group col-sm-6">\n    <label for="street2">Street 2</label>\n    <input type="text" class="form-control" id="street2" placeholder="Enter street address (cont.)">\n  </div>\n\n  <div class="form-group col-sm-6">\n    <label for="city">City</label>\n    <input type="text" class="form-control" id="city" placeholder="Enter city">\n  </div>\n\n  <div class="form-group col-sm-6">\n    <label for="state">State</label>\n    <select class="form-control col-sm-12">\n      {% for i in (1..31) %}\n        <option>{{ i }}</option>\n      {% endfor %}\n    </select>\n  </div>\n\n  <div class="form-group col-sm-6">\n    <label for="zip">Zip</label>\n    <input type="text" class="form-control" id="zip" placeholder="Enter zip code">\n  </div>\n\n  <div class="form-group col-sm-6">\n    <label for="county">County</label>\n    <input type="text" class="form-control" id="county" placeholder="Enter county">\n  </div>\n\n  <div class="form-group col-sm-6">\n    <label for="country">Country</label>\n    <select class="form-control col-sm-12">\n      {% for i in (1..31) %}\n        <option>{{ i }}</option>\n      {% endfor %}\n    </select>\n  </div>\n\n  <hr class="col-sm-12" />\n\n  <div class="form-group col-sm-6">\n    <label for="homephone">Home Phone</label>\n    <input type="text" class="form-control" id="homephone" placeholder="Enter home phone">\n  </div>\n\n  <div class="form-group col-sm-6">\n    <label for="provider">Service Provider</label>\n    <select class="form-control col-sm-12">\n      {% for i in (1..31) %}\n        <option>{{ i }}</option>\n      {% endfor %}\n    </select>\n  </div>\n\n  <hr class="col-sm-12" />\n\n  <div class="form-group col-sm-6">\n    <label for="provider">Crossroads Location</label>\n    <select class="form-control col-sm-12">\n      {% for i in (1..31) %}\n        <option>{{ i }}</option>\n      {% endfor %}\n    </select>\n  </div>\n\n</fieldset>\n\n<button class="btn btn-primary ladda-button" data-style="expand-left"><span class="ladda-label">Save</span></button>\n'),e.put("profile_personal.html",'<form role="form" ng-controller="crdsProfilePersonal">\n  <div class="row">\n    <div class="form-group col-sm-6">\n      <label for="firstname">Email</label>\n      <input type="email" class="form-control" id="email" name="email" placeholder="Enter email address" ng-model="contact.emailaddress.value">\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="form-group col-sm-6">\n      <label for="firstname">First Name</label>\n      <input type="text" class="form-control" id="firstname" placeholder="Enter first name" ng-model="contact.firstname.value">\n    </div>\n\n    <div class="form-group col-sm-6">\n      <label for="middlename">Middle Name</label>\n      <input type="text" class="form-control" id="middlename" placeholder="Enter middle name" ng-model="contact.middlename.value">\n    </div>\n\n    <div class="form-group col-sm-6">\n      <label for="lastname">Last Name</label>\n      <input type="text" class="form-control" id="lastname" placeholder="Enter last name" ng-model="contact.lastname.value">\n    </div>\n\n    <div class="form-group col-sm-6">\n      <label for="maidenname">Maiden Name</label>\n      <input type="text" class="form-control" id="maidenname" placeholder="Enter maiden name">\n    </div>\n\n    <div class="form-group col-sm-6">\n      <label for="nickname">Nick Name <small class="text-muted">(Example: Rob or Becky)</small></label>\n      <input type="text" class="form-control" id="nickname" placeholder="Enter nick name" ng-model="contact.nickname.value">\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="form-group col-sm-6">\n      <label for="nickname">Mobile Phone</label>\n      <input type="text" class="form-control" id="mobile" placeholder="Enter mobile phone" ng-model="contact.mobile.value">\n    </div>\n\n    <div class="form-group col-sm-6">\n      <label for="provider">Service Provider</label>\n      <select class="form-control col-sm-12">\n        {% for i in (1..31) %}\n          <option>{{ i }}</option>\n        {% endfor %}\n      </select>\n    </div>\n\n  </div>\n\n  <div class="row">\n    <div class="col-sm-6" ng-controller="crdsDatePickerCtrl">\n      <label class="control-label">Birth Date</label>\n      <p class="input-group">\n        <input type="text" class="form-control" datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" ng-model="contact.birthdate.value" is-open="opened" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" ng-click="open($event)" />\n        <span class="input-group-btn">\n          <button type="button" class="btn btn-primary" ng-click="open($event)"><svg viewBox="0 0 32 32" class="icon icon-calendar"><use xlink:href="#calendar"></use></svg></button>\n        </span>\n      </p>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="form-group col-sm-6">\n      <label for="marital_status">Maritial Status</label>\n      <select class="form-control col-sm-12" ng-model="contact.maritalstatus.value" ng-options="maritalstatus.id as maritalstatus.value for maritalstatus in maritalstatusVals"></select>\n    </div>\n\n    <div class="form-group col-sm-6">\n      <label class="block">Gender</label>\n      <label class="radio-inline" ng-repeat="gender in genders">\n        <input type="radio" id="gender" ng-value="gender.value" ng-model="contact.gender.value"> {{ gender.value }}\n      </label>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="form-group col-sm-6">\n      <label for="employer">Employer</label>\n      <input type="text" class="form-control" id="employer" placeholder="Enter employer">\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-sm-6" ng-controller="crdsDatePickerCtrl">\n      <label class="control-label">When did you start attending Crossroads?</label></span>\n      <p class="input-group">\n        <input type="text" class="form-control" datepicker-popup="MM/dd/yyyy" ng-model="contact.startattending.value" is-open="opened" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" ng-click="open($event)" />\n        <span class="input-group-btn">\n          <button type="button" class="btn btn-primary" ng-click="open($event)"><svg viewBox="0 0 32 32" class="icon icon-calendar"><use xlink:href="#calendar"></use></svg></button>\n        </span>\n      </p>\n    </div>\n  </div>\n\n  <button class="btn btn-primary ladda-button" data-style="expand-left"><span class="ladda-label">Save</span></button>\n</form>\n'),e.put("profile_skills.html","<div >skills\n</div>\n")}]);