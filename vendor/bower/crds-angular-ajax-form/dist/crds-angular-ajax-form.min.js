(function(){angular.module("crds-ajax-form",[])}).call(this),function(){angular.module("crds-ajax-form").directive("crdsAjaxFormSuccess",["$animate",function(e){return{require:"^crdsAjaxForm",restrict:"EA",scope:!0,terminal:!0,priority:1e3,transclude:"element",link:function(r,n,t,i,s){i.registerSuccess(function(){var r,t;return r=n.parent(),t=r.parent(),s(function(n){return e.enter(n,t,r)})})}}}])}.call(this),function(){var e=function(e,r){return function(){return e.apply(r,arguments)}},r={}.hasOwnProperty;angular.module("crds-ajax-form").directive("crdsAjaxForm",["$compile",function(){return{restrict:"A",scope:!0,controller:["$scope","$element","$attrs","$http",function(n,t,i,s){var a;return new(a=function(){function a(){this.registerSuccess=e(this.registerSuccess,this);var a,o,u,c,l,f;u=[],this.hidden=function(){var e,r,n,i;for(n=t[0].elements,i=[],e=0,r=n.length;r>e;e++)l=n[e],"hidden"===l.type&&i.push(l);return i}(),f=function(e,r){return e.$setDirty(),e[r.param]?(e[r.param].$setValidity("server",!1,e),e[r.param].$setViewValue(e[r.param].$modelValue),u.push(r.param)):void 0},o=function(e,r){e[r].$setValidity("server",!0,e),e[r].$setPristine()},c=function(e){var n,t,i,s;if(e.$error){i=e.$error,s=[];for(n in i)r.call(i,n)&&(t=i[n],s.push(function(){var r,n,i;for(i=[],r=0,n=t.length;n>r;r++)l=t[r],i.push(l.$valid?void 0:e[l.$name].$setViewValue(e[l.$name].$modelValue));return i}()));return s}},a=function(e){var n,t;t=[];for(n in e)r.call(e,n)&&(l=e[n],t.push(n.match(/^\$/&&e[n].$valid&&e[n].$setPristine)?void 0:e[n].$setPristine()));return t},t.bind("submit",function(e){return function(r){var d,m,$,h,p,v,g,y;for(r.stopPropagation(),r.preventDefault(),$=n[i.name],a($),h=0,v=u.length;v>h;h++)d=u[h],o($,d);if(u=[],$.$valid){for(m=n.$eval(i.crdsAjaxForm)||{},y=e.hidden,p=0,g=y.length;g>p;p++)l=y[p],m[l.name]=l.value;s({method:i.method,url:i.action,data:m}).success(function(){e.successMessage?(e.successMessage(),t.remove()):n.$emit("notify.success","Success!"),$.$setPristine()}).error(function(e,r){var t,i,s;if(400===r){if(n.$emit("notify.warning","Server-side validation failed"),e)for(i=0,s=e.length;s>i;i++)t=e[i],f($,t)}else n.$emit("notify.error","An unknown error occurred during form submission")})}else n.$emit("notify.warning","Client-side validation failed"),c($);return!1}}(this))}return a.successHandler,a.prototype.registerSuccess=function(e){return this.successMessage=e},a}())}]}}])}.call(this);